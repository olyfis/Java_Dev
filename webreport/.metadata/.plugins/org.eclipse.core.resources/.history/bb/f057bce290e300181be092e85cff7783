package com.olympus.webreport;

import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;
import org.w3c.dom.Element;
import javax.servlet.Servlet;
import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**********************************************************************************************************/	
/**********************************************************************************************************/	

/**********************************************************************************************************/	

/**********************************************************************************************************/	

/**********************************************************************************************************/	

/**********************************************************************************************************/	


public class GetQuoteData  extends HttpServlet {
	@Override
	protected void doGet(HttpServletRequest req, HttpServletResponse res) 
			throws ServletException, IOException {
		
		
		//PrintWriter out = res.getWriter();
		res.setContentType("text/plain");

		String appKey = "appKey";
		String appKeyValue = req.getParameter(appKey);
		
		
		String paramName = "appID";
		String paramValue = req.getParameter(paramName);
/*
		out.write(paramName);
		out.write(" = ");
		out.write(paramValue);
		out.write("\n");
*/
		
		if (paramValue != null) {
			//out.write("Parameter " + paramName + " found");
			System.out.println("PARAM:" + paramValue + "---");
			res.getWriter().println("****PARMVal=" + paramValue + "---<BR>");
		}

		//out.close();
		// call with app_ID=101-0017172-001
		ArrayList<String> xData = getdata(paramValue);	
		//printName(xData);
		req.getSession().setAttribute("APP_ID", paramValue);
		req.getSession().setAttribute("xData", xData);
        req.getRequestDispatcher("/appdata2.jsp").forward(req, res);
		return;
		
	}
	
	/**********************************************************************************************************/	

    
	@Override
	public void init() throws ServletException {
		System.out.println("Servlet " + this.getServletName() + " has started");
	}
	/**********************************************************************************************************/	

	@Override
	public void destroy() {
		System.out.println("Servlet " + this.getServletName() + " has stopped");
	}
	
}
